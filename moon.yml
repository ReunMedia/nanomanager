dependsOn:
  - "frontend"
  - "php"

workspace:
  # Only inherit specific tasks for root project
  inheritedTasks:
    include:
      - lintPkgJson
      - lintComposerJson

tasks:
  lint:
    deps:
      - "lintPkgJson"
      - "lintComposerJson"

  build:
    deps:
      - prepare-release
      - php:build
    options:
      runDepsInParallel: false

  prepare-release:
    command:
      - "bun"
      - "scripts/prepare-release.ts"
    inputs:
      - "project://^?group=sources"
