dependsOn:
  - frontend

tasks:
  build:
    command:
      - "vendor/bin/box"
      - "compile"
    deps:
      - format
      - lint
      - test
      - ^:build
    inputs:
      - "@group(phpSources)"
      - "box.json"

  preview:
    command: composer preview

  trap:
    command: composer trap

  # This task runs tests on a specific PHP version using Docker
  test-php-compatibility:
    command:
      - "docker"
      - "compose"
      - "up"
      - "--build"
    inputs:
      - "@group(phpSources)"
      - "@group(phpTests)"
      - "docker-compose.yaml"
      - "docker/*"
